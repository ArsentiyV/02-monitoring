# Домашнее задание к занятию "`Типы и структура СУБД`" - `Варитлов Арсентий`


### Задание 1.

Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для
 хранения определённых данных. Он вам предоставил следующие типы сущностей, 
которые нужно будет хранить в БД:
- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

Ответ. 

1. Для электронных чеков в json-виде  - использовать документо-ориентированые 
   БД, например, MongoDB, т.к. документы в ней хранятся в JSON или BSON.
2. Для складов и автомобильных дорог для логистической компании - использовать
   графовые БД, например, Neo4j, т.к. цель - оптимизация пути от точки А до 
   точки Б.
3. Для генеалогических деревьев - использовать иерархическкую БД - один отец 
   от которого пошел род.
4. Для кэша идентификаторов клиентов с ограниченным временем жизни для движка 
   аутенфикации - использовать БД ключ-значение, например Redis.
5. Для отношений клиент-покупка для интернет-магазина- использовать реляционные
   БД - в данном случае нам важно хранить данные о клиенте, о том, что
   покупал, какое кол-во, в какой период, в таком случае мы можем получать 
   статистику и аналитику по людям, понимать. что они покупают чаще, 
   обладая такой информацией, можем выдавать персональные предложения - 
   стимулировать совершать покупки.


### Задание 2. 

Вы создали распределённое высоконагруженное приложение и хотите классифицировать
его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша
система, если (каждый пункт — это отдельная реализация вашей системы и для 
каждого пункта нужно привести классификацию):
- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.
Согласно PACELC-теореме как бы вы классифицировали эти реализации?


Ответ.

1. PA |  PA/EL
2. CA |  PC/EL
3. PC |  PA/EC

### Задание 3.

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?1

Ответ.

Не могут, т.к. есть принципы которые противоречат друг другу. BASE отдает приоритет высокой 
производительности/доступности в ущерб согласованности данных. Главное разногласие в 
требовании согласованности. ACID требует немедленной согласованности, BASE согласованности 
в какой-то момент времени в будущем, и согласованность может обеспечиваться не механизмами БД, 
а средствами разработки.


### Задание 4.

Задача 4
Вам дали задачу написать системное решение, основой которого бы послужили:
- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.
Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. Что это за 
система? Какие минусы выбора этой системы?

Ответ.

Наиболее подходящим на мой взгляд решением в данной ситуации будет Redis. Redis
это key-value хранилище, имеет механизм Pub/Sub и TTL с возможностью реакции на
его истечение. 
Минусы Redis:
- высокие требования к оперативной памяти сервера
- консистентность данных - в случае отказа сервера, данные из оперативной памяти
  будут утеряны  и сохранятся только данные с последней синхронизации с диском
- отсутствует разграничение прав доступа по пользователям.
- отсутствует поддержка языка SQL
- экземпляр БД не маштабируется
- работает только на одном ядре процессора в однопоточном режиме

---
